<!doctype html>
<!-- The Time Machine GitHub pages theme was designed and developed by Jon Rohan, on Feb 7, 2012. -->
<!-- Follow him for fun. http://twitter.com/jonrohan. Tail his code on http://github.com/jonrohan -->
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <link rel="stylesheet" href="stylesheets/stylesheet.css" media="screen"/>
  <link rel="stylesheet" href="stylesheets/pygment_trac.css"/>
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script type="text/javascript" src="javascripts/script.js"></script>

  <title>Underscore-fire</title>
  <meta name="description" content="Fires multiple asynchronous functions with a single callback.">

  <meta name="viewport" content="width=device-width,initial-scale=1">

</head>

<body>

  <div class="wrapper">
    <header>
      <h1 class="title">Underscore-fire</h1>
    </header>
    <div id="container">
      <p class="tagline">Fires multiple asynchronous functions with a single callback.</p>
      <div id="main" role="main">
        <div class="download-bar">
        <div class="inner">
          <a href="https://github.com/tysoncadenhead/underscore-fire/tarball/master" class="download-button tar"><span>Download</span></a>
          <a href="https://github.com/tysoncadenhead/underscore-fire/zipball/master" class="download-button zip"><span>Download</span></a>
          <a href="https://github.com/tysoncadenhead/underscore-fire" class="code">View Underscore-fire on GitHub</a>
        </div>
        <span class="blc"></span><span class="trc"></span>
        </div>
        <article class="markdown-body">
          <p>This underscore add-on was written to allow you to fire multiple functions at the same time and get a single callback when they are all completed. There is no reliance on the DOM, so you can use it in the browser or in Node.</p>

<p>Please note that there is currently no support for chaining function calls and that all of the functions will be fired at the same time.</p>

<p>The only hard dependency is <a href="https://github.com/documentcloud/underscore">underscore</a> or <a href="https://github.com/bestiejs/lodash">lodash</a>.</p>

<h2>
<a name="api" class="anchor" href="#api"><span class="octicon octicon-link"></span></a>API</h2>

<p>While the _.fire method is very powerful, it only has three parameters:</p>

<h4>
<a name="_fire-array-functions-to-fire-function-callback-function-or-array-filter-context-" class="anchor" href="#_fire-array-functions-to-fire-function-callback-function-or-array-filter-context-"><span class="octicon octicon-link"></span></a>_.fire( array [functions to fire], function [callback], function or array [filter], context );</h4>

<p>The functions to fire will each be called by passing in any data from the optional filter parameter. Once all of the functions have been completed, the callback function will fire with an array of all of the results from the functions as its only parameter.</p>

<p>Maybe a few examples would be helpful...</p>

<h2>
<a name="examples" class="anchor" href="#examples"><span class="octicon octicon-link"></span></a>Examples</h2>

<h3>
<a name="firing-a-single-function" class="anchor" href="#firing-a-single-function"><span class="octicon octicon-link"></span></a>Firing a single function</h3>

<p>You'd probably never need to fire a single function with Underscore-Fire, but this is how you would do it.</p>

<div class="highlight highlight-javascript"><pre><span class="kd">var</span> <span class="nx">fns</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s2">"hello world"</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">_</span><span class="p">.</span><span class="nx">fire</span><span class="p">(</span> <span class="nx">fns</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// ["hello world"];</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="firing-multiple-functions" class="anchor" href="#firing-multiple-functions"><span class="octicon octicon-link"></span></a>Firing multiple functions</h3>

<p>We can fire multiple functions. Once they are all fired, the callback will contain an array of all three results.</p>

<div class="highlight highlight-javascript"><pre><span class="kd">var</span> <span class="nx">fns</span> <span class="o">=</span> <span class="p">[</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s2">"hello world"</span><span class="p">;</span>
<span class="p">},</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s2">"hello moon"</span><span class="p">;</span>
<span class="p">},</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s2">"hello sun"</span><span class="p">;</span>
<span class="p">}];</span>

<span class="nx">_</span><span class="p">.</span><span class="nx">fire</span><span class="p">(</span> <span class="nx">fns</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// ["hello world", "hello moon", "hello sun"];</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="asynchronous-callbacks" class="anchor" href="#asynchronous-callbacks"><span class="octicon octicon-link"></span></a>Asynchronous callbacks</h3>

<p>Every function has a "done" function as its first parameter. Instead of using return, you can fire the done function when you are ready. This is useful for timeouts, ajax calls and asynchronous node processes. Note that even though the third function will complete before the first function, the results are still returned in the order the functions are added to the array.</p>

<div class="highlight highlight-javascript"><pre><span class="kd">var</span> <span class="nx">fns</span> <span class="o">=</span> <span class="p">[</span><span class="kd">function</span> <span class="p">(</span><span class="nx">done</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
       <span class="nx">done</span><span class="p">(</span><span class="s2">"hello world"</span><span class="p">);</span>
    <span class="p">},</span> <span class="mi">2000</span><span class="p">);</span>
<span class="p">},</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">done</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
       <span class="nx">done</span><span class="p">(</span><span class="s2">"hello moon"</span><span class="p">);</span>
    <span class="p">},</span> <span class="mi">1500</span><span class="p">);</span>
<span class="p">},</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">done</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
       <span class="nx">done</span><span class="p">(</span><span class="s2">"hello sun"</span><span class="p">);</span>
    <span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>
<span class="p">}];</span>

<span class="nx">_</span><span class="p">.</span><span class="nx">fire</span><span class="p">(</span> <span class="nx">fns</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// ["hello world", "hello moon", "hello sun"];</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>

<h3>
<a name="passing-in-parameters" class="anchor" href="#passing-in-parameters"><span class="octicon octicon-link"></span></a>Passing in parameters</h3>

<p>Every function has a "done" function as its first parameter. Instead of using return, you can fire the done function when you are ready. This is useful for timeouts, ajax calls and asynchronous node processes. Note that even though the third function will complete before the first function, the results are still returned in the order the functions are added to the array. You can pass up to 15 parameters into the filter array.</p>

<div class="highlight highlight-javascript"><pre><span class="kd">var</span> <span class="nx">fns</span> <span class="o">=</span> <span class="p">[</span><span class="kd">function</span> <span class="p">(</span><span class="nx">done</span><span class="p">,</span> <span class="nx">hello</span><span class="p">,</span> <span class="nx">exclamation</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">hello</span> <span class="o">+</span> <span class="s2">" world"</span> <span class="o">+</span> <span class="nx">exclamation</span><span class="p">;</span>

<span class="p">},</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">done</span><span class="p">,</span> <span class="nx">hello</span><span class="p">,</span> <span class="nx">exclamation</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">hello</span> <span class="o">+</span> <span class="s2">" moon"</span> <span class="o">+</span> <span class="nx">exclamation</span><span class="p">;</span>

<span class="p">},</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">done</span><span class="p">,</span> <span class="nx">hello</span><span class="p">,</span> <span class="nx">exclamation</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">hello</span> <span class="o">+</span> <span class="s2">" sun"</span> <span class="o">+</span> <span class="nx">exclamation</span><span class="p">;</span>
<span class="p">}];</span>

<span class="nx">_</span><span class="p">.</span><span class="nx">fire</span><span class="p">(</span> <span class="nx">fns</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>

    <span class="c1">// ["hello world!", "hello moon!", "hello sun!"];</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>

<span class="p">},</span> <span class="p">[</span><span class="s2">"hello"</span><span class="p">,</span> <span class="s2">"!"</span><span class="p">]);</span>
</pre></div>

<h3>
<a name="passing-in-different-parameters-for-each-function" class="anchor" href="#passing-in-different-parameters-for-each-function"><span class="octicon octicon-link"></span></a>Passing in different parameters for each function</h3>

<p>If you provide an array of filters, each one will be applied to the function with the same index.</p>

<div class="highlight highlight-javascript"><pre><span class="kd">var</span> <span class="nx">fns</span> <span class="o">=</span> <span class="p">[</span><span class="kd">function</span> <span class="p">(</span><span class="nx">done</span><span class="p">,</span> <span class="nx">hello</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">hello</span><span class="p">;</span>

<span class="p">},</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">done</span><span class="p">,</span> <span class="nx">hello</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">hello</span><span class="p">;</span>

<span class="p">},</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">done</span><span class="p">,</span> <span class="nx">hello</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">hello</span><span class="p">;</span>
<span class="p">}];</span>

<span class="kd">var</span> <span class="nx">filters</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">[</span><span class="s2">"hello world"</span><span class="p">],</span>
  <span class="p">[</span><span class="s2">"hello moon"</span><span class="p">],</span>
  <span class="p">[</span><span class="s2">"hello sun"</span><span class="p">]</span>
<span class="p">];</span>

<span class="nx">_</span><span class="p">.</span><span class="nx">fire</span><span class="p">(</span> <span class="nx">fns</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>

    <span class="c1">// ["hello world", "hello moon", "hello sun"];</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>

<span class="p">},</span> <span class="nx">filters</span><span class="p">);</span>
</pre></div>

<h3>
<a name="passing-the-filters-as-a-function" class="anchor" href="#passing-the-filters-as-a-function"><span class="octicon octicon-link"></span></a>Passing the filters as a function</h3>

<p>You can use a function for the filters instead of an array. The function will include a "done" function to use as a callback and the index of the function being called.</p>

<div class="highlight highlight-javascript"><pre><span class="kd">var</span> <span class="nx">fns</span> <span class="o">=</span> <span class="p">[</span><span class="kd">function</span> <span class="p">(</span><span class="nx">done</span><span class="p">,</span> <span class="nx">hello</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">hello</span><span class="p">;</span>

<span class="p">},</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">done</span><span class="p">,</span> <span class="nx">hello</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">hello</span><span class="p">;</span>

<span class="p">},</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">done</span><span class="p">,</span> <span class="nx">hello</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">hello</span><span class="p">;</span>
<span class="p">}];</span>

<span class="kd">var</span> <span class="nx">filters</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">done</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">switch</span><span class="p">(</span><span class="nx">index</span><span class="p">)</span> <span class="p">{</span>

    <span class="k">case</span> <span class="mi">0</span><span class="o">:</span>
      <span class="nx">done</span><span class="p">(</span><span class="s2">"hello world"</span><span class="p">);</span>
      <span class="k">break</span><span class="p">;</span>

    <span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
      <span class="nx">done</span><span class="p">(</span><span class="s2">"hello moon"</span><span class="p">);</span>
      <span class="k">break</span><span class="p">;</span>

    <span class="k">case</span> <span class="mi">2</span><span class="o">:</span>
      <span class="nx">done</span><span class="p">(</span><span class="s2">"hello sun"</span><span class="p">);</span>
      <span class="k">break</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">_</span><span class="p">.</span><span class="nx">fire</span><span class="p">(</span> <span class="nx">fns</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>

    <span class="c1">// ["hello world", "hello moon", "hello sun"];</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>

<span class="p">},</span> <span class="nx">filters</span><span class="p">);</span>
</pre></div>

<h3>
<a name="setting-the-context" class="anchor" href="#setting-the-context"><span class="octicon octicon-link"></span></a>Setting the context</h3>

<p>You can pass the context for the functions and the callback as the fourth parameter in the _.fire() function. If the context is passed in, "this" will refer to the context you have provided.</p>

<div class="highlight highlight-javascript"><pre><span class="kd">var</span> <span class="nx">fns</span> <span class="o">=</span> <span class="p">[</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

    <span class="c1">// true</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">isRightContext</span><span class="p">);</span>
    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}];</span>

<span class="kd">var</span> <span class="nx">Context</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">isRightContext</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">fire</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

        <span class="nx">_</span><span class="p">.</span><span class="nx">fire</span><span class="p">(</span> <span class="nx">fns</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>

            <span class="c1">// true</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">isRightContext</span><span class="p">);</span>

        <span class="p">},</span> <span class="p">[],</span> <span class="k">this</span><span class="p">);</span>

    <span class="p">};</span>

<span class="p">};</span>

<span class="kd">var</span> <span class="nx">context</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Context</span><span class="p">();</span>
<span class="nx">context</span><span class="p">.</span><span class="nx">fire</span><span class="p">();</span>
</pre></div>
        </article>
      </div>
    </div>
    <footer>
      <div class="owner">
      <p><a href="https://github.com/tysoncadenhead" class="avatar"><img src="https://0.gravatar.com/avatar/283773207d6e2c2b9f2a86f7088a7328?d=https%3A%2F%2Fidenticons.github.com%2F70b7d791697cba729a8d743378a217b5.png&amp;r=x&amp;s=60" width="48" height="48"/></a> <a href="https://github.com/tysoncadenhead">tysoncadenhead</a> maintains <a href="https://github.com/tysoncadenhead/underscore-fire">Underscore-fire</a></p>


      </div>
      <div class="creds">
        <small>This page generated using <a href="http://pages.github.com/">GitHub Pages</a><br/>theme by <a href="https://twitter.com/jonrohan/">Jon Rohan</a></small>
      </div>
    </footer>
  </div>
  <div class="current-section">
    <a href="#top">Scroll to top</a>
    <a href="https://github.com/tysoncadenhead/underscore-fire/tarball/master" class="tar">tar</a><a href="https://github.com/tysoncadenhead/underscore-fire/zipball/master" class="zip">zip</a><a href="" class="code">source code</a>
    <p class="name"></p>
  </div>

  
</body>
</html>
